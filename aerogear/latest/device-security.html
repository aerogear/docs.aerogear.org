<!DOCTYPE html>
<html lang="en">
  <head>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-8+rznmq/k0KZkJlZhnuPEVkbRD7tA0wcFEjY48dajGWn3Xc1MasJwS8/tJ7OEsKW" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-1.9.1.min.js" integrity="sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ=" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" integrity="sha384-Nud2SriDt2fZ+u85IBC48Yn9p+l4AGlapnX1EGA2KrnZjYJx8sxKnw/CIxc1wU1B" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-url/2.5.3/url.js"></script>
<script>
function addBlockSwitches() {
	$('.primary').each(function() {
		primary = $(this);
		createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
		primary.children('.title').remove();
	});
	$('.secondary').each(function(idx, node) {
		secondary = $(node);
		primary = findPrimary(secondary);
		switchItem = createSwitchItem(secondary, primary.children('.switch'));
		switchItem.content.addClass('hidden');
		findPrimary(secondary).append(switchItem.content);
		secondary.remove();
	});
}

function createBlockSwitch(primary) {
	blockSwitch = $('<div class="switch"></div>');
	primary.prepend(blockSwitch);
	return blockSwitch;
}

function findPrimary(secondary) {
	candidate = secondary.prev();
	while (!candidate.is('.primary')) {
		candidate = candidate.prev();
	}
	return candidate;
}

function createSwitchItem(block, blockSwitch) {
	blockName = block.children('.title').text();
	content = block.children('.content').first().append(block.next('.colist'));
	item = $('<div class="switch--item">' + blockName + '</div>');
	item.on('click', '', content, function(e) {
		$(this).addClass('selected');
		$(this).siblings().removeClass('selected');
		e.data.siblings('.content').addClass('hidden');
		e.data.removeClass('hidden');
	});
	blockSwitch.append(item);
	return {'item': item, 'content': content};
}

$(addBlockSwitches);

Zepto(function($){
	if (url('?header') === 'false') {
		// Hide the navbar for showcase apps (#nochrome)
		$('body').addClass('nochrome');
	}
})
</script>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Security :: AeroGear Mobile Services</title>
    <link rel="canonical" href="https://docs.aerogear.org/aerogear/latest/device-security.html">
    <meta name="generator" content="Antora 1.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/index.html">AeroGear</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        
        <li>
          <a href="https://aerogear.org">Home</a>
        </li>

        <li>
          <a href="https://aerogear.org/getting-started/">Getting Started</a>
        </li>

        <li>
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile Services<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a href="https://aerogear.org/services/identity-management/">
                  <i class="material-icons" aria-hidden="true">account_circle</i> Identity Management
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/push/">
                  <i class="material-icons" aria-hidden="true">notifications_active</i> Push Notifications
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/runtime-connector/">
                  <i class="material-icons" aria-hidden="true">cloud</i> Runtime Connector
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/metrics/">
                  <i class="material-icons" aria-hidden="true">insert_chart</i> Mobile Metrics
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/mobile-ci-cd/">
                  <i class="material-icons" aria-hidden="true">build</i> Mobile CI/CD
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/device-security/">
                  <i class="material-icons" aria-hidden="true">security</i> Device Security
                </a>
              </li>
            </ul>
        </li>

        <li>
          <a href="https://aerogear.org/sdks">Mobile SDKs</a>
        </li>

        <li class="hidden-sm active">
          <a href="https://docs.aerogear.org">Docs</a>
        </li>
   
        <li>
          <a href="https://aerogear.org/community">Community</a>
        </li>
        

        <li>
          <a href="https://aerogear.org/news">News</a>
        </li>
        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav><div class="main-wrapper">
<div class="navigation-container" data-component="aerogear" data-version="latest">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Mobile Services</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="getting-started.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#setting-up-aerogear-mobile-services-on-openshift">Setting Up</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#registering">Registering a Mobile Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#provisioning">Provisioning a Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#binding">Binding Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#setting-up-your-local-development-environment">Setting Up Development Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html#running">Running a Mobile App</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="mobile-clients.html">Mobile Clients</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobile-clients.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobile-clients.html#registering">Registering a Mobile Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobile-clients.html#services">Viewing Available Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobile-clients.html#building">Building Mobile Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobile-clients.html#sdk">AeroGear SDK</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="con_services.html">Mobile Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="identity-management.html">Identity Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="identity-management.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="identity-management.html#setup">Setting Up</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="identity-management.html#user-auth">User Authentication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="identity-management.html#access">Access Control</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="identity-management.html#sso">Single Sign On</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="identity-management.html#monitoring">Monitoring Identity Management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="push-notifications.html">Push Notifications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push-notifications.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push-notifications.html#setup">Setting Up</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push-notifications.html#push-ui">Using the Push Admin UI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push-notifications.html#sending">Sending a Notification</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push-notifications.html#handling">Handling a Notification</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="runtime-connector.html">Runtime Connector</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="runtime-connector.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="runtime-connector.html#setup">Setting Up</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="mobile-metrics.html">Mobile Metrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-metrics.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-metrics.html#setup">Setting Up</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-metrics.html#app">App and Device</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-metrics.html#setup">Device Trust</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-metrics.html#identity">Identity Management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="mobile-cicd.html">Mobile CI/CD</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#setup">Setting Up</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#build-config">Creating a Build Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#jenkins">Adding a Jenkins file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#building">Building Apps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#logs">Accessing Build Logs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#deploy">Deploying Apps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile-cicd.html#clean">Cleaning up Builds</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="device-security.html">Device Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#setup">Setting Up</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#device-trust">Performing Device Trust Checks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#cert-pinning">Certificate Pinning</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="showcase-apps.html">Showcase Apps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps.html#setup">Service Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps.html#app">Showcase App Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps.html#binding">Service Binding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps.html#downloading-the-mobile-services-configuration-file">Downloading the Mobile Services Configuration File</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps.html#build">Building and Running the Showcase Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps.html#certs">Using Self Signed Certs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps.html#features">Demonstrating the Showcase App Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ref_api.html">API Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mobile-cli.html">Mobile CLI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mobile Services</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Mobile Security</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mobile-security/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Mobile Services</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="getting-started.html" class="home-link"></a>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="con_services.html">Mobile Services</a></li>
    <li class="crumb"><a href="device-security.html">Device Security</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/aerogear/mobile-docs/edit/master/modules/ROOT/pages/device-security.adoc"></a></div>
</div>
<article class="doc">
<h1>Device Security</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction to the Device Security Service</a></li>
<li><a href="#con_introduction-to-device-security_additional-resources-con_introduction-to-device-security">Configuring your Development Environment for the Device Security Service</a></li>
<li><a href="#downloading-the-mobile-services-configuration-file">Downloading the Mobile Services Configuration File</a>
<ul class="sectlevel2">
<li><a href="#setting-up-device-security-service-sdk">Setting up Device Security service SDK</a></li>
</ul>
</li>
<li><a href="#device-trust">Performing Device Trust Checks in your Device</a>
<ul class="sectlevel2">
<li><a href="#root-access-detection">Root Access Detection</a></li>
<li><a href="#developer-mode-detection">Developer Mode Detection</a></li>
<li><a href="#debugger-detection">Debugger Detection</a></li>
<li><a href="#emulator-detection">Emulator Detection</a></li>
<li><a href="#device-lock-detection">Device Lock Detection</a></li>
<li><a href="#app-data-backup-detection">App Data Backup Detection</a></li>
<li><a href="#device-encryption-detection">Device Encryption Detection</a></li>
<li><a href="#invoking-multiple-device-checks">Invoking Multiple Device Checks</a></li>
<li><a href="#additional-resources">Additional Resources</a></li>
</ul>
</li>
<li><a href="#cert-pinning">Certificate Pinning in Android Devices</a>
<ul class="sectlevel2">
<li><a href="#generating-pinning-configuration">Generating Pinning Configuration</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction to the Device Security Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Device Security service allows you to easily configure and manage device security, and trust checks for your mobile application</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Perform a range of device trust checks on the mobile device, such as checking if the device is rooted, and allows you take proactive action based on the results</p>
</li>
<li>
<p>Distribute SSL certificates with a mobile app to create a direct chain of trust (certificate pinning)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Device Security is not currently associated with an OpenShift service, so there are no provisioning or binding tasks associated with using Device Security.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="con_introduction-to-device-security_additional-resources-con_introduction-to-device-security"><a class="anchor" href="#con_introduction-to-device-security_additional-resources-con_introduction-to-device-security"></a>Configuring your Development Environment for the Device Security Service</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="downloading-the-mobile-services-configuration-file"><a class="anchor" href="#downloading-the-mobile-services-configuration-file"></a>Downloading the Mobile Services Configuration File</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to your project in OpenShift.</p>
</li>
<li>
<p>On the <strong>Overview</strong> screen, expand your Mobile Client to view the <strong>CLIENT INFO</strong>.</p>
</li>
<li>
<p>Copy the configuration to your clipboard.</p>
</li>
<li>
<p>Save the contents of the clipboard to a new file called <code>mobile-services.json</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The mobile-services.json file is the link between your provisioned services on OpenShift and the mobile app you are developing. This file provides all required configuration to initialise the various SDKs and get them hooked up/connected to the back-end services.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Follow the next specific additional instructions depending on your platform:</p>
</li>
</ol>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="paragraph">
<p>Locate this file at the following location in your application project:</p>
</div>
<div class="paragraph">
<p><code>app/src/main/assets/mobile-services.json</code></p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="paragraph">
<p>Locate this file at the following location in your application project:</p>
</div>
<div class="paragraph">
<p><code>&lt;app directory&gt;/mobile-services.json</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Make sure this file is visible in Xcode, add the file if necessary.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="paragraph">
<p>Locate this file at the following location in your application project:</p>
</div>
<div class="paragraph">
<p><code>src/mobile-services.json</code></p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="paragraph">
<p>Locate this file at the following location in your application project:</p>
</div>
<div class="paragraph">
<p><code>Resources/mobile-services.json</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-device-security-service-sdk"><a class="anchor" href="#setting-up-device-security-service-sdk"></a>Setting up Device Security service SDK</h3>
<div class="sect3">
<h4 id="importing-the-libraries"><a class="anchor" href="#importing-the-libraries"></a>Importing the libraries</h4>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following dependency in your app&#8217;s <strong>build.gradle</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation 'org.aerogear:android-security:1.0.0'
}</code></pre>
</div>
</div>
</li>
<li>
<p>Get an instance of <code>SecurityService</code> to start using the SDK.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">SecurityService securityService = MobileCore.getInstance(SecurityService.class);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any subsequent call to MobileCore#getInstance returns the same instance of <code>SecurityService</code>.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the dependency to your <strong>Podfile</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ruby hljs" data-lang="ruby">target '[TARGET NAME]' do
    pod 'AGSSecurity', '1.0.0'
end</code></pre>
</div>
</div>
</li>
<li>
<p>Update the dependencies by running in your terminal</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ pod install</code></pre>
</div>
</div>
</li>
<li>
<p>Import <code>AGSSecurity</code> and instantiate the <code>SecurityService</code> to start using the SDK</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">import AGSSecurity

let security = AGSSecurity()</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any subsequent call to AGSSecurity returns the same instance of the <code>SecurityService</code>.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the <a href="https://www.npmjs.com/package/@aerogear/security">AeroGear Security</a> package from <a href="https://www.npmjs.com/" target="_blank" rel="noopener">NPM</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ npm install @aerogear/security</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <a href="https://www.npmjs.com/package/@aerogear/cordova-plugin-aerogear-security" target="_blank" rel="noopener">AeroGear Security plugin</a> for Cordova:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cordova plugin add @aerogear/cordova-plugin-aerogear-security</code></pre>
</div>
</div>
</li>
<li>
<p>Import and instantiate <code>SecurityService</code> to start using the SDK:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const SecurityService = require("@aerogear/security");

const securityService = new SecurityService();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any new instantiation of <code>SecurityService</code> returns the same instance.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install <a href="https://docs.microsoft.com/en-us/nuget/install-nuget-client-tools" target="_blank" rel="noopener">NuGet</a></p>
</li>
<li>
<p>Install the <a href="https://www.nuget.org/packages/AeroGear.Mobile.Security" target="_blank" rel="noopener">AeroGear Security</a> package</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ dotnet add package AeroGear.Mobile.Security --version 1.0.0</code></pre>
</div>
</div>
</li>
<li>
<p>Install the specific packages for Android:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ dotnet add package AeroGear.Mobile.Security.Platform.Android --version 1.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>And for iOS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ dotnet add package AeroGear.Mobile.Security.Platform.iOS --version 1.0.0</code></pre>
</div>
</div>
</li>
<li>
<p>Initialize the SDK by adding the following line to your Android application&#8217;s <strong>MainActivity.cs</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">protected override void OnCreate(Bundle savedInstanceState)
{
    base.OnCreate(savedInstanceState);

    SecurityService.InitializeService();
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And to your iOS application&#8217;s <strong>AppDelegate.cs</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">public override bool FinishedLaunching(UIApplication app, NSDictionary options)
{
    SecurityService.InitializeService();
    // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>Get an instance of <code>SecurityService</code> to start using the SDK:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any subsequent call to MobileCore#getInstance returns the same instance of <code>SecurityService</code>.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="device-trust"><a class="anchor" href="#device-trust"></a>Performing Device Trust Checks in your Device</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes what Device Trust Checks are available and how to execute them for the supported platforms. Also, mind that Device Checks can be performed either individually or together.</p>
</div>
<div class="sect2">
<h3 id="root-access-detection"><a class="anchor" href="#root-access-detection"></a>Root Access Detection</h3>
<div class="paragraph">
<p>Use this to help prevent your app running in a device that has been rooted/jailbroken.</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.check(DeviceCheckType.ROOT_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let security = AGSSecurity()
let result = security.check(IsJailbrokenCheck())</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">new SecurityService()
    .check(SecurityCheckType.notRooted)
    .then(result =&gt; {
        // Handle the security result metric
        // result: { id: string, name: string, passed: boolean }
    });</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="paragraph">
<p>Use <code>NOT_ROOTED</code> for Android:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.NOT_ROOTED);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>NOT_JAILBROKEN</code> for iOS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.NOT_JAILBROKEN);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="developer-mode-detection"><a class="anchor" href="#developer-mode-detection"></a>Developer Mode Detection</h3>
<div class="paragraph">
<p>Use this to detect if Developer Mode has been enabled on the device.</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.check(DeviceCheckType.DEVELOPER_MODE_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="paragraph">
<p>This check is not available for iOS.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="paragraph">
<p>This check is not available for Cordova.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This check is available for Android only.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.NO_DEVELOPER_MODE);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="debugger-detection"><a class="anchor" href="#debugger-detection"></a>Debugger Detection</h3>
<div class="paragraph">
<p>Use this to detect if a debugger is attached to the app.</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.check(DeviceCheckType.DEBUGGER_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let security = AGSSecurity()
let result = security.check(IsDebuggerCheck())</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">new SecurityService()
    .check(SecurityCheckType.notDebugMode)
    .then(result =&gt; {
        // Handle the security result metric
        // result: { id: string, name: string, passed: boolean }
    });</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.NO_DEBUGGER);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="emulator-detection"><a class="anchor" href="#emulator-detection"></a>Emulator Detection</h3>
<div class="paragraph">
<p>Use this to detect if the app is being run on an emulator.</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.check(DeviceCheckType.IS_EMULATOR);</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let security = AGSSecurity()
let result = security.check(IsEmulatorCheck())</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">new SecurityService()
    .check(SecurityCheckType.notEmulated)
    .then(result =&gt; {
        // Handle the security result metric
        // result: { id: string, name: string, passed: boolean }
    });</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.NOT_IN_EMULATOR);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="device-lock-detection"><a class="anchor" href="#device-lock-detection"></a>Device Lock Detection</h3>
<div class="paragraph">
<p>Use this to detect if a device has a lock screen set (with pin, fingerprint, pattern&#8230;&#8203;).</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.check(DeviceCheckType.SCREEN_LOCK_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let security = AGSSecurity()
let result = security.check(IsDeviceLockCheck())</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For iOS devices this check requires iOS 8 or above.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">new SecurityService()
    .check(SecurityCheckType.hasDeviceLock)
    .then(result =&gt; {
        // Handle the security result metric
        // result: { id: string, name: string, passed: boolean }
    });</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.SCREEN_LOCK_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="app-data-backup-detection"><a class="anchor" href="#app-data-backup-detection"></a>App Data Backup Detection</h3>
<div class="paragraph">
<p>Use this to detect whether the applicationâ€™s data is configured to be synchronized across devices.</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.check(DeviceCheckType.BACKUP_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="paragraph">
<p>This check is not available for iOS.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="paragraph">
<p>This is not available for Cordova.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This check is available for Android only.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.ALLOW_BACKUP_DISABLED);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="device-encryption-detection"><a class="anchor" href="#device-encryption-detection"></a>Device Encryption Detection</h3>
<div class="paragraph">
<p>Use this to detect whether a devices filesystem is encrypted.</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.check(DeviceCheckType.ENCRYPTION_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="paragraph">
<p>This check is not available for iOS.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="paragraph">
<p>This is not available for Cordova.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This check is available for Android only.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(SecurityChecks.HAS_ENCRYPTION_ENABLED);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="invoking-multiple-device-checks"><a class="anchor" href="#invoking-multiple-device-checks"></a>Invoking Multiple Device Checks</h3>
<div class="paragraph">
<p>Device Checks can be run in group, both synchronously and asynchronously.</p>
</div>
<div class="sect3">
<h4 id="synchronously"><a class="anchor" href="#synchronously"></a>Synchronously</h4>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get a <code>SyncCheckExecutor</code> from <code>SecurityService</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);
SyncDeviceCheckExecutor syncCheckExecutor = securityService.getCheckExecutor();</code></pre>
</div>
</div>
</li>
<li>
<p>Add your checks and execute synchronously:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;String, DeviceCheckResult&gt; results = syncCheckExecutor
    .addCheck(DeviceCheckType.&lt;check_type&gt;)
    // Add more checks here
    .execute();</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="paragraph">
<p>Invoke multiple checks using the <code>checkMany</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let checks = [IsDeviceLockCheck(), IsEmulatorCheck(), /** Add more checks here */ ]
let results = security.checkMany(checks)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>SecurityCheckResult</code> objects in the returning array stay in the same order they were provided.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="paragraph">
<p>Executing multiple checks synchronously is not directly supported. Instead, it&#8217;s possible to use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" target="_blank" rel="noopener">await</a> operator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const results = await securityService.checkMany(
    SecurityCheckType.notRooted,
    SecurityCheckType.notEmulated,
    // Add more checks here
);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>SecurityCheckResult</code> objects in the returning array stay in the same order they were provided.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build a <code>SyncSecurityCheckExecutor</code> from <code>SecurityService</code> and execute:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

var checkExecutor = securityService.GetSyncExecutor()
                        .WithSecurityCheck(SecurityChecks.NOT_ROOTED)
                        .WithSecurityCheck(SecurityChecks.NO_DEVELOPER_MODE)
                        // Add more checks here
                        .Build()
Dictionary&lt;string, SecurityCheckResult&gt; results = checkExecutor.Execute();</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="asynchronously"><a class="anchor" href="#asynchronously"></a>Asynchronously</h4>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get an <code>AsyncCheckExecutor</code> from <code>SecurityService</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);
AsyncDeviceCheckExecutor asyncCheckExecutor = securityService.getAsyncCheckExecutor();</code></pre>
</div>
</div>
</li>
<li>
<p>Add your checks and execute synchronously:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;String, Future&lt;DeviceCheckResult&gt;&gt; results = asyncCheckExecutor
    .addCheck(DeviceCheckType.&lt;check_type&gt;)
    // Add more checks here
    .execute();</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="paragraph">
<p>Executing multiple checks asynchronously is not supported at the moment for this platform.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="paragraph">
<p>Invoke multiple checks using the <code>checkMany</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const checkResults = securityService.checkMany(
    SecurityCheckType.notRooted,
    SecurityCheckType.notEmulated,
    // Add more checks here
)
.then(results =&gt; {
    // Handle results
});</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This method returns a Promise with an array containing all <code>SecurityCheckResult</code> objects in the same order they were provided.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="paragraph">
<p>Executing multiple checks asynchronously is not supported at the moment for this platform.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="additional-resources"><a class="anchor" href="#additional-resources"></a>Additional Resources</h3>
<div class="sect3">
<h4 id="adding-custom-device-checks"><a class="anchor" href="#adding-custom-device-checks"></a>Adding Custom Device Checks</h4>
<div class="paragraph">
<p>Besides the <a href="security/index.html#ref_terminology_Device%20Security_ref_terminology" class="page">Provided Device Checks</a> it&#8217;s also possible to make use of your own custom checks. Follow the next steps depending on your platform to implement them:</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Extend the <code>AbstractDeviceCheck</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class CustomDeviceCheck extends AbstractDeviceCheck {

    @Override
    protected boolean execute(@NonNull final Context context) {
        // Implement security check logic here
        return false;
    }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Instantiate it to execute it, using the instance of <code>SecurityService</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheck customDeviceCheck = new CustomDeviceCheck();
DeviceCheckResult result = securityService.check(customDeviceCheck);</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement the <code>SecurityCheck</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">public class MyCustomCheck: SecurityCheck {

    public let name = "Custom Check"

    public init() {}

    public func check() -&gt; SecurityCheckResult {
        // Implement security check logic here
        return nil
    }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Use the <code>check</code> function as usual:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let security = AGSSecurity()
let result = security.check(MyCustomCheck())</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement the <code>SecurityCheck</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">class CustomSecurityCheck implements SecurityCheck {

    get name(): string {
        return "My Custom Check";
    }

    public check(): Promise&lt;SecurityCheckResult&gt; {
        // Implement security check logic here
        return null;
    }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Instantiate it to execute it, using the instance of <code>SecurityService</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const securityService = new SecurityService();

securityService.check(new CustomSecurityCheck())
    .then(result =&gt; {
        // Handle result
    });</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement the <code>ISecurityCheck</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">class CustomSecurityCheck : ISecurityCheck
{
    public string GetName()
    {
        return "Custom check";
    }

    public string GetId()
    {
        return typeof(CustomSecurityCheck).FullName;
    }

    public SecurityCheckResult Check()
    {
        // Implement security check logic here
        return null;
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Instantiate it to execute it, using the instance of <code>SecurityService</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c# hljs" data-lang="c#">var securityService = MobileCore.GetService&lt;SecurityService&gt;();

SecurityCheckResult result = securityService.Check(new CustomSecurityCheck());</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="reporting-device-checks-results-via-the-metrics-service"><a class="anchor" href="#reporting-device-checks-results-via-the-metrics-service"></a>Reporting Device Checks Results Via the Metrics Service</h4>
<div class="paragraph">
<p>In order to report the results of Device Checks utilize this service in conjunction with the <a href="metrics/index.html" class="page">Metrics Service</a>.</p>
</div>
<div class="sidebarblock primary">
<div class="title">Android</div><div class="content">
<div class="paragraph">
<p>Report individual checks via the <code>checkAndSendMetric</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MetricsService metricsService = MobileCore.getInstance(MetricsService.class);
SecurityService securityService = MobileCore.getInstance(SecurityService.class);

DeviceCheckResult result = securityService.checkAndSendMetric(DeviceCheckType.&lt;check_type&gt;, metricsService);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or alternatively report multiple checks using a <code>CheckExecutor</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MetricsService metricsService = mobileCore.getInstance(MetricsService.class);
Map&lt;String, DeviceCheckResult&gt; results = DeviceCheckExecutor.Builder.newSyncExecutor(this.getContext())
    .withDeviceCheck(DeviceCheckType.&lt;check_type&gt;)
    // Add other checks...
    .withMetricsService(metricsService)
    .build()
    .execute();</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">iOS</div><div class="content">
<div class="paragraph">
<p>Report individual checks via the <code>checkAndPublishMetric</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let result = security.checkAndPublishMetric(IsDeviceLockCheck())</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or alternatively report multiple checks using the <code>checkManyAndPublishMetric</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-swift hljs" data-lang="swift">let checks = [IsDeviceLockCheck(), IsEmulatorCheck(), /** Add more checks here */ ]
let results = security.checkManyAndPublishMetric(checks)</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Cordova</div><div class="content">
<div class="paragraph">
<p>Report individual checks via the <code>checkAndPublishMetric</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">new SecurityService()
    .checkAndPublishMetric(SecurityCheckType.notRooted)
    .then(result =&gt; {
        // Handle the security result metric
        // result: { id: string, name: string, passed: boolean }
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or alternatively report multiple checks using the <code>checkManyAndPublishMetric</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">new SecurityService()
    .checkManyAndPublishMetric(
        SecurityCheckType.notRooted,
        SecurityCheckType.notEmulated,
        // Add more checks here
    )
    .then(results =&gt; {
        // Handle the security results array
    });</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary">
<div class="title">Xamarin</div><div class="content">
<div class="paragraph">
<p>Device checks reports are not yet available for Xamarin.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cert-pinning"><a class="anchor" href="#cert-pinning"></a>Certificate Pinning in Android Devices</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning" target="_blank" rel="noopener">Certificate pinning</a> can be enabled in individual SDKs through the <code>mobile-services.json</code> file.
Certificate pinning will only be enabled for services which are used directly by the SDKs. For
other services <strong>SPKI</strong> pinning is used. Mobile services must have pinning configured
separately. For more information on setting up certificate pinning for mobile services see the
<a href="https://developer.android.com/training/articles/security-config.html#CertificatePinning" target="_blank" rel="noopener">Android network security guide</a>.</p>
</div>
<div class="sect2">
<h3 id="generating-pinning-configuration"><a class="anchor" href="#generating-pinning-configuration"></a>Generating Pinning Configuration</h3>
<div class="paragraph">
<p>The AeroGear SDK gets its configuration from the <code>https</code> section of the <code>mobile-services.json</code> file
in a project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "services":[],
    "https": {
        "certificatePins": [{
            "host": "example.sync.service",
            "certificateHash": "exampleHash"
        }]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To include the <code>https</code> section in configuration when generating it using the Mobile CLI use the
<code>--include-cert-pins</code> flag when retrieving a client configuration. By default, self-signed or
invalid certs will not be permitted to be included in the certificate pinning configuration. To
allow these to be included use the <code>--insecure-skip-tls-verify</code> flag.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./mobile get clientconfig &lt;client name&gt; --include-cert-pins --insecure-skip-tls-verify</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="using-pinning-configuration"><a class="anchor" href="#using-pinning-configuration"></a>Using Pinning Configuration</h4>
<div class="paragraph">
<p>If the <code>https</code> section is included in the <code>mobile-services.json</code> file then certificate pinning will
automatically be enabled for mobile services.</p>
</div>
</div>
<div class="sect3">
<h4 id="considerations"><a class="anchor" href="#considerations"></a>Considerations</h4>
<div class="paragraph">
<p>If the certificate authority of a service changes then the <code>mobile-services.json</code> file will need to
be regenerated in order to retrieve the correct <code>https</code> configuration. The app will then need to be
rebuilt and republished for the end users to consume. If this is not done then an app may become
incapable of making network requests to other services.</p>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <div class="container">
    <div class="row">

      <div class="col-sm-4">
        <h5>Mobile Services</h5>
        <ul class="list-unstyled">
         <li><a href="https://aerogear.org/services/identity-management/">Identity Management</a></li>
         <li><a href="https://aerogear.org/services/push/">Push Notifications</a></li>
         <li><a href="https://aerogear.org/services/runtime-connector/">Runtime Connector</a></li>
         <li><a href="https://aerogear.org/services/metrics/">Mobile Metrics</a></li>
         <li><a href="https://aerogear.org/services/mobile-ci-cd/">Mobile CI/CD</a></li>
         <li><a href="https://aerogear.org/services/device-security/">Device Security</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-4">
        <h5>Mobile SDKs</h5>
        <ul class="list-unstyled">
         <li><a href="https://aerogear.org/sdks/android/">Android</a></li>
         <li><a href="https://aerogear.org/sdks/cordova/">Cordova</li>
         <li><a href="https://aerogear.org/sdks/ios/">iOS</a></li>
         <li><a href="https://aerogear.org/sdks/xamarin/">Xamarin</a></li>
        </ul>
      </div><!-- col -->
      
      <div class="col-sm-4">
        <h5>COMMUNITY</h5>
        <ul class="list-unstyled">
          <li><a target="_blank" href="https://github.com/aerogear/">GitHub - Aerogear</a></li>
          <li><a target="_blank" href="https://github.com/aerogearcatalog/">GitHub - Aerogear Catalog</a></li>
          <li><a target="_blank" href="https://issues.jboss.org/browse/AEROGEAR">Jira Repo Issues</a></li>
          <li><a  href="https://aerogear.org/community/contribution-guide/">Contribution Guide</a></li>
          <li><a target="_blank" href="https://groups.google.com/forum/#!forum/aerogear">Google Group</a></li>
          <li><a href="irc://irc.freenode.net/aerogear">IRC</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-12 follow">
        <h5>FOLLOW US</h5>
        <ul class="list-inline">
          <li><a target="_blank" href="https://www.twitter.com/aerogears"><i class="fa fa-twitter-square"></i> Twitter</a></li>
          <li><a target="_blank" href="https://www.youtube.com/channel/UCgDcDoN2b7cEI63fgpxACBA"><i class="fa fa-youtube"></i> YouTube</a></li>
          <li><a target="_blank" href="/feed.atom"><i class="fa fa-rss-square"></i> Feed</a></li>
        </ul>
        
        <p>AeroGear project is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a></p>
      </div><!-- col -->
    
    </div><!-- row -->

  </div><!-- container -->

</footer><!-- footer -->

<section class="redhat">
  <div class="container">
    <p class="text-center">
      <a href="http://www.redhat.com/">
        <img src="/_/img/redhatlogo-wite.png" alt="redhatlogo-wite" width="130">
      </a>
    </p>       
  </div><!-- container -->
</section>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
