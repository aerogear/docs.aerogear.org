<!DOCTYPE html>
<html lang="en">
  <head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
<script>
function addBlockSwitches() {
	$('.primary').each(function() {
		primary = $(this);
		createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
		primary.children('.title').remove();
	});
	$('.secondary').each(function(idx, node) {
		secondary = $(node);
		primary = findPrimary(secondary);
		switchItem = createSwitchItem(secondary, primary.children('.switch'));
		switchItem.content.addClass('hidden');
		findPrimary(secondary).append(switchItem.content);
		secondary.remove();
	});
}

function createBlockSwitch(primary) {
	blockSwitch = $('<div class="switch"></div>');
	primary.prepend(blockSwitch);
	return blockSwitch;
}

function findPrimary(secondary) {
	candidate = secondary.prev();
	while (!candidate.is('.primary')) {
		candidate = candidate.prev();
	}
	return candidate;
}

function createSwitchItem(block, blockSwitch) {
	blockName = block.children('.title').text();
	content = block.children('.content').first().append(block.next('.colist'));
	item = $('<div class="switch--item">' + blockName + '</div>');
	item.on('click', '', content, function(e) {
		$(this).addClass('selected');
		$(this).siblings().removeClass('selected');
		e.data.siblings('.content').addClass('hidden');
		e.data.removeClass('hidden');
	});
	blockSwitch.append(item);
	return {'item': item, 'content': content};
}

$(addBlockSwitches);    
</script>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrate an Android Application with Custom Services Running in OpenShift :: AeroGear Mobile Services</title>
    <link rel="canonical" href="https://www.aerogear.org/aerogear/latest/integrate-android-app-with-custom-service.html">
    <meta name="generator" content="Antora 1.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.aerogear.org">AeroGear Mobile Services</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">

    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="aerogear" data-version="latest">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">AeroGear Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installing-mobile-services.html">Installing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobile_terminology.html">Terminology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started-with-openshift.html">Getting Started with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="workflow.html">Mobile Apps &amp; Services Workflow</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="con_services.html">Introducing Mobile Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="provisioning-services.html">Provisioning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="integrating-services.html">Binding Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="apps.html">Integrating Mobile Apps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="registering-a-mobile-app.html">Registering an App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="binding-mobile-app-record-to-mobile-services.html">Binding an App to a Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuring-dev-env.html">Configuring a Dev Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Using Mobile Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="push/index.html">Push Notifications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push/provisioning.html">Provisioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push/binding.html">Binding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push/configuring-dev-env-push.html">Configuring a Dev Environment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push/coding.html">Adding Code</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="push/proc_sending-a-push-notification.html">Sending a Push Notification</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">More&#8230;&#8203;</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="push/admin-ui.html">Unified Push admin UI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="push/handling-push-notifications.html">Handling Push Notifications</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="push/proc_preparing-ups-for-use-with-ios.html">Apple Push Network</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="push/google-setup.html">Firebase Cloud Messaging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="metrics/index.html">Mobile Metrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="metrics/provisioning.html">Provisioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Client metrics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="metrics/binding.html">Binding</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="metrics/configuring-dev-env-metrics.html">Configuring a Dev environment</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="metrics/analysing-app-usage.html">Analysing App Usage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service metrics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="metrics/monitoring-keycloak.html">Monitoring Identity Management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="keycloak/index.html">Identity Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="keycloak/provisioning.html">Provisioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="keycloak/binding.html">Binding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="keycloak/configuring-dev-env-keycloak.html">Configuring a Dev environment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="keycloak/coding.html">Adding Code</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">More&#8230;&#8203;</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="keycloak/keycloak-setup.html">Keycloak Setup</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="keycloak/android-additional-configuration.html">Additional Configuration for Android</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="keycloak/retrieving-current-user.html">Retrieving Current User</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="keycloak/retrieving-custom-user-attributes.html">Retrieving Custom User Attributes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="keycloak/authenticating.html">Authenticating</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="keycloak/retrieving-users-roles.html">Retrieving Users Roles</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="keycloak/logging-out.html">Logging Out</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="digger/index.html">Mobile CI/CD</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="digger/provisioning.html">Provisioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="digger/configuring-dev-env-digger.html">Configuring a Dev environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="custom/index.html">Runtime Connector</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="custom/provisioning.html">Provisioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="custom/binding.html">Binding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="custom/configuring-dev-env-custom.html">Configuring a Dev environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="security/index.html">Device Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/provisioning.html">Provisioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/binding.html">Binding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/configuring-dev-env-security.html">Configuring a Dev environment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#">security/proc_performing-device-checks.adoc</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/proc_pinning-certificates.html">Certificate Pinning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security/proc_self-signed-certs.html">Self Signed Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#">security/proc_adding_secure_storage.adoc</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="showcase-apps/index.html">Showcase Apps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps/service-setup.html">Service Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps/identity-management.html">Identity Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps/device-security.html">Device Security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps/push-notifications.html">Push Notifications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="showcase-apps/metrics.html">Mobile Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testcard.html">Runtime Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ref_api.html">API Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mobile-cli.html">Mobile CLI</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">AeroGear Docs</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">AeroGear Docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="file:///home/jstaffor/mext/mobile-docs/modules/ROOT/pages/integrate-android-app-with-custom-service.adoc"></a></div>
</div>
<article class="doc">
<h1>Integrate an Android Application with Custom Services Running in OpenShift</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document describes the steps needed to configure the Aerogear Android SDK to allow your Android app to interact with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your own backend services in OpenShift</p>
</li>
<li>
<p>External backend services</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="./create-android-client-openshift.adoc">Create an Android Mobile Client in OpenShift</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="procedure"><a class="anchor" href="#procedure"></a>Procedure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For demonstration, this guide uses the example Python application which can be found in the OpenShift Service Catalog. The same steps can be followed any HTTP web service running in OpenShift that has a publicly accessible route.</p>
</div>
<div class="paragraph">
<p>Pictured below is the example Python application, and the Android Mobile Client provisioned in OpenShift.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/custom-service-py.png" alt="Custom Service and Android Client in OpenShift"></span></p>
</div>
<div class="sect2">
<h3 id="provision-the-custom-runtime-connector"><a class="anchor" href="#provision-the-custom-runtime-connector"></a>Provision the Custom Runtime Connector</h3>
<div class="paragraph">
<p>We can connect our Mobile Client to our backend service by provisioning a <strong>Custom Runtime Connector</strong> from the OpenShift Service Catalog.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the Custom Runtime Connector from the Service Catalog.</p>
</li>
<li>
<p>Put the service name in the service name field. This name will be used in the SDK to retrieve details about the service.</p>
</li>
<li>
<p>Put the publicly accessible url of the service in the Service URL field.</p>
</li>
<li>
<p>In the Service Config field, place any additional configuration that might be needed by the mobile app in order to communicate with the backend service. <strong>This must be a valid JSON format</strong>.</p>
</li>
<li>
<p>Click 'Create'.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/create-crc.png" alt="Provisioning a Custom Runtime Connector"></span></p>
</div>
<div class="paragraph">
<p>Note that provisioning the Custom Runtime Connector simply creates a Config Map that is used to populate the <code>mobile-services.json</code> file which is consumed by your mobile application. It does not deploy any new services.</p>
</div>
</div>
<div class="sect2">
<h3 id="add-the-custom-runtime-connector-service-to-the-mobile-client"><a class="anchor" href="#add-the-custom-runtime-connector-service-to-the-mobile-client"></a>Add the Custom Runtime Connector Service to the Mobile Client</h3>
<div class="ulist">
<ul>
<li>
<p>Click the Mobile Client to reveal the JSON configuration. The 'services' list is empty.</p>
</li>
<li>
<p>Click the 'Add Service' button and select 'custom-runtime-connector' from the dropdown menu.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/mobile-client-select-crc.png" alt="Mobile Client Config Blank"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The 'services' list in the Mobile Client Configuration now includes a configuration object that contains details related to your backend service such as the name, uri and custom configuration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/images/mobile-client-custom-runtime.png" alt="Mobile Client Config with Custom Service"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="integrate-your-android-application-with-the-custom-service"><a class="anchor" href="#integrate-your-android-application-with-the-custom-service"></a>Integrate your Android Application with the Custom Service</h3>
<div class="paragraph">
<p>Take a copy of the JSON configuration from the Mobile Client and save it in <code>app/src/main/assets/mobile-services.json</code> in your Android application&#8217;s source code.</p>
</div>
<div class="paragraph">
<p>Now the Aerogear SDK can be used to get the configuration for your custom service and it is possible to make requests. Please look at the example code below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// get the service URL
final ServiceConfiguration serviceConfiguration = mobileCore.getServiceConfiguration("custom-runtime-connector");
final String serviceUrl = serviceConfiguration.getUrl();

// make the request
HttpRequest httpRequest = mobileCore.getHttpLayer().newRequest();
httpRequest.get(serviceUrl);
HttpResponse httpResponse = httpRequest.execute();

httpResponse.onError(() -&gt; {
    // handle error
});

httpResponse.onSuccess(() -&gt; {
    // handle success
});

httpResponse.onComplete(() -&gt; {
    // called regardless success or error
});</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This is a preview of the https://docs.aerogear.org website.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
