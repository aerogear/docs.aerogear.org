<!DOCTYPE html>
<html lang="en">
  <head>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-8+rznmq/k0KZkJlZhnuPEVkbRD7tA0wcFEjY48dajGWn3Xc1MasJwS8/tJ7OEsKW" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-1.9.1.min.js" integrity="sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ=" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" integrity="sha384-Nud2SriDt2fZ+u85IBC48Yn9p+l4AGlapnX1EGA2KrnZjYJx8sxKnw/CIxc1wU1B" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-url/2.5.3/url.js"></script>
<script>
function addBlockSwitches() {
	$('.primary').each(function() {
		primary = $(this);
		createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
		primary.children('.title').remove();
	});
	$('.secondary').each(function(idx, node) {
		secondary = $(node);
		primary = findPrimary(secondary);
		switchItem = createSwitchItem(secondary, primary.children('.switch'));
		switchItem.content.addClass('hidden');
		findPrimary(secondary).append(switchItem.content);
		secondary.remove();
	});
}

function createBlockSwitch(primary) {
	blockSwitch = $('<div class="switch"></div>');
	primary.prepend(blockSwitch);
	return blockSwitch;
}

function findPrimary(secondary) {
	candidate = secondary.prev();
	while (!candidate.is('.primary')) {
		candidate = candidate.prev();
	}
	return candidate;
}

function createSwitchItem(block, blockSwitch) {
	blockName = block.children('.title').text();
	content = block.children('.content').first().append(block.next('.colist'));
	item = $('<div class="switch--item">' + blockName + '</div>');
	item.on('click', '', content, function(e) {
		$(this).addClass('selected');
		$(this).siblings().removeClass('selected');
		e.data.siblings('.content').addClass('hidden');
		e.data.removeClass('hidden');
	});
	blockSwitch.append(item);
	return {'item': item, 'content': content};
}

$(addBlockSwitches);

Zepto(function($){
	if (url('?header') === 'false') {
		// Hide the navbar for showcase apps (#nochrome)
		$('body').addClass('nochrome');
	}
})
</script>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Mobile Development Guide :: AeroGear Mobile Services</title>
    <link rel="canonical" href="https://docs.aerogear.org/mobile-security/latest/mobileSecureDevelopmentGuide.html">
    <meta name="generator" content="Antora 1.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/index.html">AeroGear</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        
        <li>
          <a href="https://aerogear.org">Home</a>
        </li>

        <li>
          <a href="https://aerogear.org/getting-started/">Getting Started</a>
        </li>

        <li>
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Mobile Services<span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a href="https://aerogear.org/services/identity-management/">
                  <i class="material-icons" aria-hidden="true">account_circle</i> Identity Management
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/push/">
                  <i class="material-icons" aria-hidden="true">notifications_active</i> Push Notifications
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/runtime-connector/">
                  <i class="material-icons" aria-hidden="true">cloud</i> Runtime Connector
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/metrics/">
                  <i class="material-icons" aria-hidden="true">insert_chart</i> Mobile Metrics
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/mobile-ci-cd/">
                  <i class="material-icons" aria-hidden="true">build</i> Mobile CI/CD
                </a>
              </li>
              <li>
                <a href="https://aerogear.org/services/device-security/">
                  <i class="material-icons" aria-hidden="true">security</i> Device Security
                </a>
              </li>
            </ul>
        </li>

        <li>
          <a href="https://aerogear.org/sdks">Mobile SDKs</a>
        </li>

        <li class="hidden-sm active">
          <a href="https://docs.aerogear.org">Docs</a>
        </li>
   
        <li>
          <a href="https://aerogear.org/community">Community</a>
        </li>
        

        <li>
          <a href="https://aerogear.org/news">News</a>
        </li>
        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav><div class="main-wrapper">
<div class="navigation-container" data-component="mobile-security" data-version="latest">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Mobile Security</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index.html#aerogear-mobile-security">Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#authentication-session-management">Authentication and Session Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#data-storage-summary">Data Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#network-security">Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#mobile-app-self-defence">Mobile App Defense</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#handling-sensitive-data-overview">Sensitive Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#cryptography-summary">Cryptography</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="owaspTopMobileRisks.html">OWASP Top 10 Mobile Risks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobileSecurityRequirements.html">Mobile Application Security Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="owaspMobileDevelopmentGuidelines.html">Secure Mobile Development Guidelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="owaspCheatSheetSeries.html">OWASP Cheat Sheet Series</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="owaspMobileVerificationStandard.html">OWASP Mobile Verification Standard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="owaspMobileThreatModelProject.html">OWASP Threat Model Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="owaspMobileMTools.html">OWASP M-Tools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="iosSecurityGuide.html">iOS Security Whitepaper</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="androidSecurityGuide.html">Android Security Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="androidDeveloperSecurityGuide.html">Android Developer Security Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cordovaSecurityGuide.html">Cordova Security Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nispMobileSecurityVetting.html">Vetting the Security of Mobile Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="niapMobileAppVetting.html">NIAP Mobile App Vetting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dhsMobileDeviceSecurity.html">DHS Study on Mobile Device Security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nispMobileDeviceSecurityGuides.html">Guidelines for Managing the Security of Mobile Devices in the Enterprise</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobileBankingSecurity.html">Mobile Banking Applications Security Challenges</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="mobileSecureDevelopmentGuide.html">Secure Mobile Development Guide</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mobile Security</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Mobile Security</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Mobile Services</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../aerogear/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../aerogear/latest/getting-started.html" class="home-link"></a>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Mobile Security</a></li>
    <li class="crumb">Reference</li>
    <li class="crumb"><a href="mobileSecureDevelopmentGuide.html">Secure Mobile Development Guide</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/aerogear/mobile-security/edit/master/modules/ROOT/pages/mobileSecureDevelopmentGuide.adoc"></a></div>
</div>
<article class="doc">
<h1>Secure Mobile Development Guide</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is a summary of <a href="https://books.nowsecure.com/secure-mobile-development/en/">Secure Mobile Development Guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="coding-practices"><a class="anchor" href="#coding-practices"></a>CODING PRACTICES</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="increase-code-complexity-and-use-obfuscation"><a class="anchor" href="#increase-code-complexity-and-use-obfuscation"></a>Increase Code Complexity and Use Obfuscation</h3>
<div class="ulist">
<ul>
<li>
<p>Restricting debuggers</p>
<div class="ulist">
<ul>
<li>
<p>Android applications should have <code>android:debuggable=”false”</code> set in the application manifest to prevent easy runtime manipulation by an attacker or malware.</p>
</li>
<li>
<p>On iOS you can make use of the <code>PT_DENY_ATTACH</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Trace Checking</p>
<div class="ulist">
<ul>
<li>
<p>Debugger tracing can be detected by checking the process status flags or using other techniques like comparing the return value of <code>ptrace attach</code>, checking the parent process, blacklisting debuggers in the process list or comparing timestamps on different parts of the program</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optimizations</p>
<div class="ulist">
<ul>
<li>
<p>In Android this can be achieved more easily by utilizing natively compiled libraries with the native development kit (NDK). In addition, using an LLVM Obfuscator or any protector SDK will provide better machine code obfuscation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Stripping binaries</p>
<div class="ulist">
<ul>
<li>
<p>Stripping binaries does not discard the Objective-C class or object-mapping data on iOS.</p>
</li>
<li>
<p>On Android you can reuse techniques used on GNU/Linux systems like sstriping or using UPX</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-simple-logic"><a class="anchor" href="#avoid-simple-logic"></a>Avoid Simple Logic</h3>
<div class="ulist">
<ul>
<li>
<p>Consider a better programming paradigm, where privileges are enforced by the server when the session is not trusted, or by preventing certain data from being decrypted or otherwise available until the application can determine that the session is trusted using challenge/response, OTP, or other forms of authentication</p>
</li>
<li>
<p>it is recommended to declare all sanity check functions static inline.</p>
</li>
<li>
<p>more sophisticated approaches founded in secure coding principles may be worth further investigation.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="test-third-party-libraries"><a class="anchor" href="#test-third-party-libraries"></a>Test Third-Party Libraries</h3>
<div class="ulist">
<ul>
<li>
<p>Security auditing must thoroughly test third-party libraries and functionality as well</p>
</li>
<li>
<p>Upgrading to a new version of a third-party library (or OS version) should be treated as version of your app</p>
</li>
<li>
<p>On iOS, statically compile third-party libraries to avoid LD_PRELOAD attacks</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-anti-tamper-techniques"><a class="anchor" href="#implement-anti-tamper-techniques"></a>Implement Anti-tamper Techniques</h3>
<div class="ulist">
<ul>
<li>
<p>Use checksums, digital signatures and other validation mechanisms to help detect file tampering.</p>
</li>
<li>
<p><a href="https://gist.github.com/scottyab/b849701972d57cf9562e">Android Sample</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="securely-store-sensitive-data-in-ram"><a class="anchor" href="#securely-store-sensitive-data-in-ram"></a>Securely Store Sensitive Data in RAM</h3>
<div class="ulist">
<ul>
<li>
<p>Nullify any variables that hold keys after use</p>
</li>
<li>
<p>Avoid using immutable objects for sensitive keys or passwords such as in Android java.lang.String and use char array instead.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="understand-secure-deletion-of-data"><a class="anchor" href="#understand-secure-deletion-of-data"></a>Understand Secure Deletion of Data</h3>
<div class="ulist">
<ul>
<li>
<p>Operate under the assumption that any data written to a device can be recovered</p>
</li>
<li>
<p>Wherever possible, avoid storing sensitive data on the device</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-query-string-for-sensitive-data"><a class="anchor" href="#avoid-query-string-for-sensitive-data"></a>Avoid Query String for Sensitive Data</h3>
<div class="ulist">
<ul>
<li>
<p>Use secure POST to send user data, with XSRF token protection.</p>
</li>
<li>
<p>Encrypting data using a non-zero initialization vector and temporary session keys can also help prevent a replay attack.</p>
</li>
<li>
<p>query string data can be encrypted using a temporary session key negotiated between hosts using secure algorithms, such as Diffie-Hellman</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="handling-sensitive-data"><a class="anchor" href="#handling-sensitive-data"></a>HANDLING SENSITIVE DATA</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="implement-secure-data-storage"><a class="anchor" href="#implement-secure-data-storage"></a>Implement Secure Data Storage</h3>
<div class="ulist">
<ul>
<li>
<p>Add an additional layer of verified, third-party encryption (e.g., SQLCipher) to the data as device encryption is not sufficient</p>
</li>
<li>
<p>Android</p>
<div class="ulist">
<ul>
<li>
<p>using the standard cryptographic provider “AES” will often default to the less secure AES-ECB. Best practice is to specify AES-CBC or AES-GCM with a 256-bit key and a random IV generated by SecureRandom.</p>
</li>
<li>
<p>You should also derive the key from a passphrase using the well tested PBKDF2 (Password-Based Key Derivation Function)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-secure-setting-for-cookies"><a class="anchor" href="#use-secure-setting-for-cookies"></a>Use SECURE Setting For Cookies</h3>
<div class="ulist">
<ul>
<li>
<p>The Set-Cookie headers should use the “Secure” and “HTTPOnly” settings.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="fully-validate-ssl-tls"><a class="anchor" href="#fully-validate-ssl-tls"></a>Fully Validate SSL/TLS</h3>
<div class="ulist">
<ul>
<li>
<p>use certificate pinning to protect against MITM attacks</p>
</li>
<li>
<p>If certificate pinning cannot be implemented for any app functionality that handles highly sensitive data, implement proper certificate validation</p>
<div class="ulist">
<ul>
<li>
<p>Certificate validation: Certificates presented to the app must be fully validated by the app and be signed by a trusted root CA</p>
</li>
<li>
<p>Hostname validation: The app must check and verify that the hostname (Common Name or CN) extracted from the certificate matches that of the host with which the app intends to communicate</p>
</li>
</ul>
</div>
</li>
<li>
<p>Android</p>
<div class="ulist">
<ul>
<li>
<p>Android 7.0 will only trust a preselected list of certificate authorities (CAs) maintained by the Android Open Source Project and will not trust custom CAs or CAs added by a user</p>
</li>
<li>
<p>Developers can also use the <a href="https://developer.android.com/training/articles/security-config.html">Network Security Configuration file</a> for certificate pinning</p>
</li>
<li>
<p><a href="https://github.com/commonsguy/cwac-netsecurity">CWAC-NetSecurity</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>iOS</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/datatheorem/TrustKit">TrustKit</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="protect-against-ssl-downgrade-attacks"><a class="anchor" href="#protect-against-ssl-downgrade-attacks"></a>Protect Against SSL Downgrade Attacks</h3>
<div class="ulist">
<ul>
<li>
<p>Serve all traffic, even non-sensitive traffic,over TLS</p>
</li>
<li>
<p>Validate that SSL/TLS is active</p>
</li>
<li>
<p>Android recently added <code>android:usesCleartextTraffic</code></p>
</li>
<li>
<p>iOS 9 and above require that you manually add exceptions for plaintext traffic.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="limit-use-of-uuid"><a class="anchor" href="#limit-use-of-uuid"></a>Limit Use of UUID</h3>
<div class="ulist">
<ul>
<li>
<p>avoid using any device-provided identifier to identify the device, especially if it&#8217;s integral to an implementation of device authentication.</p>
</li>
<li>
<p>recommend the creation of an app-unique "device factor" at the time of registration, installation, or first execution.</p>
</li>
<li>
<p>Apple recommends using the advertisingIdentifier - a unique identifier shared across all apps in the system.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="treat-geolocation-data-carefully"><a class="anchor" href="#treat-geolocation-data-carefully"></a>Treat Geolocation Data Carefully</h3>
<div class="ulist">
<ul>
<li>
<p>avoid storing GPS data</p>
</li>
<li>
<p>Unless required, do not log or store GPS information.</p>
</li>
<li>
<p>Cameras often geo-tags images. If this is a concern, make sure to strip the EXIF data from the image</p>
</li>
<li>
<p>Do not activate GPS in applications that will run at or near secure locations, whose coordinates or wireless network topology should not be reported back to vendors.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="institute-local-session-timeout"><a class="anchor" href="#institute-local-session-timeout"></a>Institute Local Session Timeout</h3>
<div class="ulist">
<ul>
<li>
<p>Any time the app is not used for more than 5 minutes, terminate the active session, redirect the user to the log-in screen, ensure that no app data is visible, and require the user to re-enter log-in credentials to access the app</p>
</li>
<li>
<p>After timeout, also discard and clear all memory associated with user data including any master keys use to decrypt that data</p>
</li>
<li>
<p>Also, make sure the session timeout occurs on both the client side and the server side</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-enhanced-two-factor-authentication"><a class="anchor" href="#implement-enhanced-two-factor-authentication"></a>Implement Enhanced / Two-Factor Authentication</h3>
<div class="ulist">
<ul>
<li>
<p>When sensitive data or transactions are involved, implement two-factor authentication</p>
</li>
<li>
<p>may not be feasible every time a user logs in but can be used at intervals or when accessing selected functions</p>
</li>
<li>
<p>Consider step-up authentication methods to provide normal access to non-transactional areas but require a second layer of authentication for sensitive functions</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="protect-application-settings"><a class="anchor" href="#protect-application-settings"></a>Protect Application Settings</h3>
<div class="ulist">
<ul>
<li>
<p>Compile settings into the code when possible</p>
</li>
<li>
<p>Don’t store any critical settings in dictionaries or other files unless encrypted first</p>
</li>
<li>
<p>Ideally, encrypt all configuration files using a master key encrypted with a passphrase that is supplied by the user, or with a key provided remotely when a user logs into a system</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="hide-account-numbers-and-use-tokens"><a class="anchor" href="#hide-account-numbers-and-use-tokens"></a>Hide Account Numbers and Use Tokens</h3>
<div class="ulist">
<ul>
<li>
<p>displaying partial numbers</p>
</li>
<li>
<p>store the partially hidden numbers</p>
</li>
<li>
<p>instead of account numbers, tokens be assigned to each account and provided to the client</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-secure-network-transmission-of-sensitive-data"><a class="anchor" href="#implement-secure-network-transmission-of-sensitive-data"></a>Implement Secure Network Transmission Of Sensitive Data</h3>
<div class="ulist">
<ul>
<li>
<p>Use SSL/TLS either with standard trust validation, or, for increased security, implement certificate pinning</p>
</li>
<li>
<p>For highly sensitive values, implement additional encryption in transit</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="validate-input-from-client"><a class="anchor" href="#validate-input-from-client"></a>Validate Input From Client</h3>
<div class="ulist">
<ul>
<li>
<p>all input from the client should be must be treated as untrusted.</p>
</li>
<li>
<p>Services must thoroughly filter and validate input from the app and user.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-storing-app-data-in-backups"><a class="anchor" href="#avoid-storing-app-data-in-backups"></a>Avoid Storing App Data in Backups</h3>
<div class="ulist">
<ul>
<li>
<p>Android</p>
<div class="ulist">
<ul>
<li>
<p>By default, the <code>allowBackup</code> flag within an Android app’s Manifest file is set as <code>true</code>. Therefore, explicitly declare the <code>allowBackup</code> flag as <code>false</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>iOS</p>
<div class="ulist">
<ul>
<li>
<p>avoid storing any sensitive data in plaintext within any of the files or folders within the app’s private directory or subdirectories</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="caching-and-logging"><a class="anchor" href="#caching-and-logging"></a>CACHING AND LOGGING</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="avoid-caching-app-data"><a class="anchor" href="#avoid-caching-app-data"></a>Avoid Caching App Data</h3>
<div class="ulist">
<ul>
<li>
<p>Prevent HTTP caching</p>
</li>
<li>
<p>avoid caching of URL history and page data for any Web process such as registration.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-crash-logs"><a class="anchor" href="#avoid-crash-logs"></a>Avoid Crash Logs</h3>
<div class="ulist">
<ul>
<li>
<p>Ensure released apps are built without warnings and are thoroughly tested to avoid crashes.</p>
</li>
<li>
<p>Consider disabling NSAssert for iOS</p>
</li>
<li>
<p>avoid sending crash logs over the network in plaintext</p>
</li>
<li>
<p>Use secure development tools like clang-analyzer, coverity, ASAN and other linting utilities in order to identify all possible operations that can make the app crash</p>
</li>
<li>
<p>If the app is obfuscated and stripped, the developer will need keep an address-to-symbol database in order to recover meaningful backtraces in crashlogs</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="limit-caching-of-username"><a class="anchor" href="#limit-caching-of-username"></a>Limit Caching of Username</h3>
<div class="ulist">
<ul>
<li>
<p>store a masked username instead of the actual username, and replace the username value in authentication with a hash value</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="carefully-manage-debug-logs"><a class="anchor" href="#carefully-manage-debug-logs"></a>Carefully Manage Debug Logs</h3>
<div class="ulist">
<ul>
<li>
<p>REMOVE METHOD CALLS TO THE LOG CLASS IN RELEASE BUILDS</p>
</li>
<li>
<p>SET THE “ANDROID:DEBUGGABLE” FLAG TO “FALSE” IN PRODUCTION BUILDS</p>
</li>
<li>
<p>On iOS disabling the NSLog statements on will remove potentially sensitive information which can be intercepted and as an added benefit may slightly increase the performance of the app.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="be-aware-of-the-keyboard-cache"><a class="anchor" href="#be-aware-of-the-keyboard-cache"></a>Be Aware of the Keyboard Cache</h3>
<div class="ulist">
<ul>
<li>
<p>Disable the auto-correct feature for any sensitive information, not just for password fields.</p>
</li>
<li>
<p>Add an enterprise policy to clear the keyboard dictionary at regular intervals.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="be-aware-of-copy-and-paste"><a class="anchor" href="#be-aware-of-copy-and-paste"></a>Be Aware of Copy and Paste</h3>
<div class="ulist">
<ul>
<li>
<p>Where appropriate, disable copy/paste for areas handling sensitive data</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="webviews"><a class="anchor" href="#webviews"></a>WEBVIEWS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prevent-framing-and-clickjacking"><a class="anchor" href="#prevent-framing-and-clickjacking"></a>Prevent Framing and Clickjacking</h3>
<div class="ulist">
<ul>
<li>
<p>Use <code>X-FRAME-OPTIONS</code> HEADER</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Header add X-FRAME-OPTIONS "DENY"</code></pre>
</div>
</div>
</li>
<li>
<p>Basic frame busting javascript</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>if( self != top ) {
  top.location = self.location ;
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="protect-against-csrf-with-form-tokens"><a class="anchor" href="#protect-against-csrf-with-form-tokens"></a>Protect Against CSRF with Form Tokens</h3>
<div class="ulist">
<ul>
<li>
<p>Each form submission should contain a token which was loaded with the form or at the beginning of a user session. Check this token on the server when receiving POST requests to ensure the user originated it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ios"><a class="anchor" href="#ios"></a>IOS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="use-the-keychain-carefully"><a class="anchor" href="#use-the-keychain-carefully"></a>Use the Keychain Carefully</h3>
<div class="ulist">
<ul>
<li>
<p>When storing data in the keychain, use the most restrictive protection class (as defined by the kSecAttrAccessible attribute) that still allows your application to function properly</p>
</li>
<li>
<p>To prevent the exposure of keychain items via iTunes backup, use the ThisDeviceOnly protection class where practical</p>
</li>
<li>
<p>Finally, for highly sensitive data, consider augmenting protections offered by the keychain with application-level encryption.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-cached-application-snapshots"><a class="anchor" href="#avoid-cached-application-snapshots"></a>Avoid Cached Application Snapshots</h3>
<div class="ulist">
<ul>
<li>
<p>To protect sensitive data, block caching of application snapshots using API configuration or code</p>
</li>
<li>
<p>When applicationDidEnterBackground: method returns, the snapshot of the application user interface is taken, and it’s used for transition animations and stored in the filesystem.
This method should be overridden and all the sensitive information in the user interface should be removed before it returns.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-protections-against-buffer-overflow-attacks"><a class="anchor" href="#implement-protections-against-buffer-overflow-attacks"></a>Implement Protections Against Buffer Overflow Attacks</h3>
<div class="ulist">
<ul>
<li>
<p>Enable ARC</p>
</li>
<li>
<p>Implement full ASLR protection</p>
<div class="ulist">
<ul>
<li>
<p>can be enabled when compiling by command line with option <code>-PIE</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Implement stack-smashing protection</p>
<div class="ulist">
<ul>
<li>
<p>Compile the application with the <code>-fstack-protector-all</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-caching-http-s-requests-responses"><a class="anchor" href="#avoid-caching-http-s-requests-responses"></a>Avoid Caching HTTP(S) Requests/Responses</h3>
<div class="ulist">
<ul>
<li>
<p>set the <code>cachePolicy</code> property of the NSURLRequest to disable the caching of HTTP(S) requests and responses</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-app-transport-security-ats"><a class="anchor" href="#implement-app-transport-security-ats"></a>Implement App Transport Security (ATS)</h3>
<div class="ulist">
<ul>
<li>
<p>Enable ATS globally by linking to the iOS 9.0 or later SDK and NOT setting the NSAllowsArbitraryLoads key to Yes or True</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-touch-id-properly"><a class="anchor" href="#implement-touch-id-properly"></a>Implement Touch ID Properly</h3>
<div class="ulist">
<ul>
<li>
<p>When using Touch ID for authentication, store the app’s secret in the Keychain with an ACL assigned to that item.</p>
</li>
<li>
<p>Developers can use Touch ID enrollment changes to detect and prevent a physically proximate attacker from enrolling their own fingerprint in order to gain access to protected Keychain items.</p>
<div class="ulist">
<ul>
<li>
<p>read <code>LAContext.evaluatedPolicyDomainState</code> to check whether the <code>evaluatedPolicyDomainState</code> value has changed.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="android"><a class="anchor" href="#android"></a>Android</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="implement-file-permissions-carefully"><a class="anchor" href="#implement-file-permissions-carefully"></a>Implement File Permissions Carefully</h3>
<div class="ulist">
<ul>
<li>
<p>Do not create files with permissions of MODEWORLD_READABLE or MODE_WORLD_WRITABLE unless it is required as any app would be able to read or write the file even though it may be stored in the app’s private data directory</p>
</li>
<li>
<p>Do not use modes such as 0666, 0777, and 0664 with the chmod binary or syscalls accepting a file mode</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-intents-carefully"><a class="anchor" href="#implement-intents-carefully"></a>Implement Intents Carefully</h3>
<div class="ulist">
<ul>
<li>
<p>Components accessed via Intents can be public or private. it is easy to mistakenly allow the component to be or become public.</p>
</li>
<li>
<p>If a component does not need to be accessed by all other apps, consider setting a permission on the component declared in the Manifest</p>
</li>
<li>
<p>Data received by public components cannot be trusted and must be scrutinized</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="check-activities"><a class="anchor" href="#check-activities"></a>Check Activities</h3>
<div class="ulist">
<ul>
<li>
<p>Activities can ensure proper behavior by checking internal app state to verify they are ready to load</p>
<div class="ulist">
<ul>
<li>
<p>For example, first see if the app is in the "unlocked" state and if not jump back to the lock screen.</p>
</li>
</ul>
</div>
</li>
<li>
<p>input validation is recommended when operating on data provided by an untrusted source</p>
</li>
<li>
<p>Avoid intent filters on Activities if they are private, instead use explicit intent</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-broadcasts-carefully"><a class="anchor" href="#use-broadcasts-carefully"></a>Use Broadcasts Carefully</h3>
<div class="ulist">
<ul>
<li>
<p>Use permissions to protect Intents in your application</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-pendingintents-carefully"><a class="anchor" href="#implement-pendingintents-carefully"></a>Implement PendingIntents Carefully</h3>
<div class="ulist">
<ul>
<li>
<p>Use PendingIntents as delayed callbacks to private BroadcastReceivers or broadcast activities, and explicitly specify the component name in the base Intent</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="protect-application-services"><a class="anchor" href="#protect-application-services"></a>Protect Application Services</h3>
<div class="ulist">
<ul>
<li>
<p>When calling a service with sensitive data, validate that the correct service is being called and not a malicious service</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-intent-sniffing"><a class="anchor" href="#avoid-intent-sniffing"></a>Avoid Intent Sniffing</h3>
<div class="ulist">
<ul>
<li>
<p>Do not pass sensitive data between apps using broadcast intents. Instead, use explicit intents</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="implement-content-providers-carefully"><a class="anchor" href="#implement-content-providers-carefully"></a>Implement Content Providers Carefully</h3>
<div class="ulist">
<ul>
<li>
<p>Do not give a content provider write access unless it&#8217;s absolutely necessary</p>
</li>
<li>
<p>Limit access to the minimum required for an operation</p>
</li>
<li>
<p>Treat parameters passed to content providers as untrusted input and don&#8217;t use them directly in SQL queries without sanitation</p>
</li>
<li>
<p>Content providers that serve files based on a file name being passed to the provider should ensure path traversals are filtered out.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="follow-webview-best-practices"><a class="anchor" href="#follow-webview-best-practices"></a>Follow WebView Best Practices</h3>
<div class="ulist">
<ul>
<li>
<p>Disable JavaScript and Plugin support if they are not needed.</p>
</li>
<li>
<p>Disable local file access.</p>
</li>
<li>
<p>Disallow the loading of content from third-party hosts.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-storing-cached-camera-images"><a class="anchor" href="#avoid-storing-cached-camera-images"></a>Avoid Storing Cached Camera Images</h3>
<div class="ulist">
<ul>
<li>
<p>Do not transmit a check image using non-volatile storage on the device where check image artifacts may be left behind.</p>
<div class="ulist">
<ul>
<li>
<p>Create a SurfaceView that displays a camera preview or live preview of what the camera sensor is seeing</p>
</li>
<li>
<p>Insert and program a button that when pressed returns the camera preview as a pixel array</p>
</li>
<li>
<p>Finally, convert the pixel array to bitmap, compress it to a .jpg, encode it to Base64, and submit it to the remote location</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="avoid-gui-objects-caching"><a class="anchor" href="#avoid-gui-objects-caching"></a>Avoid GUI Objects Caching</h3>
<div class="ulist">
<ul>
<li>
<p>Quit the app entirely when the user logs out.</p>
</li>
<li>
<p>Any time an activity is initiated or a screen is accessed, execute a check to determine whether the user is in a logged-in state</p>
</li>
<li>
<p>Nullify the data on a GUI screen before leaving the screen or logging out</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sign-android-apks"><a class="anchor" href="#sign-android-apks"></a>Sign Android APKs</h3>
<div class="ulist">
<ul>
<li>
<p>Sign a production app with a production certificate, not a debug certificate</p>
</li>
<li>
<p>Make sure the certificate includes a sufficient validity period (i.e., won&#8217;t expire during the expected lifespan of the app)</p>
</li>
<li>
<p>Google recommends that your certificate use at least 2048-bit encryption</p>
</li>
<li>
<p>Make sure the keystore containing the signing key is properly protected</p>
</li>
<li>
<p>Also, restrict access to the keystore to only those people that absolutely require it</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="servers"><a class="anchor" href="#servers"></a>Servers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="implement-proper-web-server-configuration"><a class="anchor" href="#implement-proper-web-server-configuration"></a>Implement Proper Web Server Configuration</h3>
<div class="ulist">
<ul>
<li>
<p>disable verbose errors</p>
</li>
<li>
<p>return the minimum amount of information in server responses.</p>
</li>
<li>
<p>change any default directories.</p>
</li>
<li>
<p>Administration or other restricted areas should not be publicly web-accessible unless absolutely necessary, and must be resistant to brute force attacks.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="properly-configure-server-side-ssl"><a class="anchor" href="#properly-configure-server-side-ssl"></a>Properly Configure Server-side SSL</h3>
<div class="ulist">
<ul>
<li>
<p>Ensure SSL certificates are properly installed and configured for the highest encryption possible.</p>
</li>
<li>
<p>TLSv1 is more than 10 years old and was found vulnerable to a “renegotiation attack” in 2009</p>
</li>
<li>
<p>Avoid weak ciphers, such as:</p>
<div class="ulist">
<ul>
<li>
<p>NULL cipher suite</p>
</li>
<li>
<p>Anonymous Diffie-Hellmann</p>
</li>
<li>
<p>DES and RC4 because of their vulnerability to crypto-analytical attacks (NOTE: iOS 10 disables RC4 by default)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Avoid weak protocols, such as:</p>
<div class="ulist">
<ul>
<li>
<p>SSLv2</p>
</li>
<li>
<p>SSLv3 because of its vulnerability to the POODLE attack - CVE-2014-3566 (NOTE: In iOS 10, the Apple Secure Transport API no longer supports SSLv3)</p>
</li>
<li>
<p>TLS 1.0 and earlier because the protocols are vulnerable to the CRIME</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-proper-session-management"><a class="anchor" href="#use-proper-session-management"></a>Use Proper Session Management</h3>
<div class="ulist">
<ul>
<li>
<p>Web languages (e.g. Java, .NET) offer session management, which is well-developed and security tested</p>
</li>
<li>
<p>Keep server software up-to-date with security patches</p>
</li>
<li>
<p>Ensure the size of the session cookie is sufficient</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="protect-and-pen-test-web-services"><a class="anchor" href="#protect-and-pen-test-web-services"></a>Protect and Pen Test Web Services</h3>
<div class="ulist">
<ul>
<li>
<p>web server must be thoroughly tested and hardened against malicious attack</p>
</li>
<li>
<p>Production server software should be updated to the latest versions, and hardened to prevent information disclosures regarding server software and interfaces</p>
</li>
<li>
<p>Authentication forms should not reflect whether a username exists</p>
</li>
<li>
<p>All login forms and forms/pages exchanging sensitive data should implement and require HTTPS</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="protect-internal-resources"><a class="anchor" href="#protect-internal-resources"></a>Protect Internal Resources</h3>
<div class="ulist">
<ul>
<li>
<p>should be blocked from external access.</p>
</li>
<li>
<p>Any resource that does not require public Internet access should be restricted using firewall rules and network segmentation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <div class="container">
    <div class="row">

      <div class="col-sm-4">
        <h5>Mobile Services</h5>
        <ul class="list-unstyled">
         <li><a href="https://aerogear.org/services/identity-management/">Identity Management</a></li>
         <li><a href="https://aerogear.org/services/push/">Push Notifications</a></li>
         <li><a href="https://aerogear.org/services/runtime-connector/">Runtime Connector</a></li>
         <li><a href="https://aerogear.org/services/metrics/">Mobile Metrics</a></li>
         <li><a href="https://aerogear.org/services/mobile-ci-cd/">Mobile CI/CD</a></li>
         <li><a href="https://aerogear.org/services/device-security/">Device Security</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-4">
        <h5>Mobile SDKs</h5>
        <ul class="list-unstyled">
         <li><a href="https://aerogear.org/sdks/android/">Android</a></li>
         <li><a href="https://aerogear.org/sdks/cordova/">Cordova</li>
         <li><a href="https://aerogear.org/sdks/ios/">iOS</a></li>
         <li><a href="https://aerogear.org/sdks/xamarin/">Xamarin</a></li>
        </ul>
      </div><!-- col -->
      
      <div class="col-sm-4">
        <h5>COMMUNITY</h5>
        <ul class="list-unstyled">
          <li><a target="_blank" href="https://github.com/aerogear/">GitHub - Aerogear</a></li>
          <li><a target="_blank" href="https://github.com/aerogearcatalog/">GitHub - Aerogear Catalog</a></li>
          <li><a target="_blank" href="https://issues.jboss.org/browse/AEROGEAR">Jira Repo Issues</a></li>
          <li><a  href="https://aerogear.org/community/contribution-guide/">Contribution Guide</a></li>
          <li><a target="_blank" href="https://groups.google.com/forum/#!forum/aerogear">Google Group</a></li>
          <li><a href="irc://irc.freenode.net/aerogear">IRC</a></li>
        </ul>
      </div><!-- col -->

      <div class="col-sm-12 follow">
        <h5>FOLLOW US</h5>
        <ul class="list-inline">
          <li><a target="_blank" href="https://www.twitter.com/aerogears"><i class="fa fa-twitter-square"></i> Twitter</a></li>
          <li><a target="_blank" href="https://www.youtube.com/channel/UCgDcDoN2b7cEI63fgpxACBA"><i class="fa fa-youtube"></i> YouTube</a></li>
          <li><a target="_blank" href="/feed.atom"><i class="fa fa-rss-square"></i> Feed</a></li>
        </ul>
        
        <p>AeroGear project is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a></p>
      </div><!-- col -->
    
    </div><!-- row -->

  </div><!-- container -->

</footer><!-- footer -->

<section class="redhat">
  <div class="container">
    <p class="text-center">
      <a href="http://www.redhat.com/">
        <img src="/_/img/redhatlogo-wite.png" alt="redhatlogo-wite" width="130">
      </a>
    </p>       
  </div><!-- container -->
</section>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
